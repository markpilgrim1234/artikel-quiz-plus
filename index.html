<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Welcher Artikel? ‚Äì Quiz</title>

  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" href="icon.png">
  <meta name="theme-color" content="#ffffff">

  <style>
    :root{
      /* Same colors as your game buttons */
      --der: #000000;
      --die: #e94e3c;
      --das: #f4c542;

      --bg: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --card: #ffffff;
      --border: #e5e7eb;
      --shadow: 0 10px 25px rgba(0,0,0,0.06);
      --radius: 14px;

      --green: #21bf73;
    }

    *{ box-sizing: border-box; }

    body{
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      line-height: 1.55;
      overflow-x: hidden;
    }

    /* Top bar */
    header{
      position: sticky;
      top: 0;
      background: rgba(255,255,255,0.92);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid var(--border);
      z-index: 20;
    }

    .topbar{
      max-width: 760px;
      margin: 0 auto;
      padding: 14px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .brand{
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 0;
    }

    .brand img{
      width: 34px;
      height: 34px;
      border-radius: 10px;
    }

    .titles{
      display: flex;
      flex-direction: column;
      min-width: 0;
    }

    .titles h1{
      margin: 0;
      font-size: 1.05rem;
      line-height: 1.2;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .titles p{
      margin: 0;
      color: var(--muted);
      font-size: 0.9rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Clean link like a website nav */
    .navlink{
      font-weight: 700;
      color: #1f4fd6;
      text-decoration: none;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid transparent;
      white-space: nowrap;
    }
    .navlink:hover{
      background: rgba(31,79,214,0.06);
      border-color: rgba(31,79,214,0.15);
    }

    .wrap{
      max-width: 760px;
      margin: 0 auto;
      padding: 18px 16px 28px;
    }

    .hero{
      margin: 18px 0 14px;
      padding: 18px 18px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(180deg, #ffffff 0%, #fafafa 100%);
      box-shadow: var(--shadow);
    }
    .heroTitle{
      margin: 0 0 6px;
      font-size: 1.35rem;
      letter-spacing: 0.2px;
    }
    .heroSub{
      margin: 0;
      color: var(--muted);
      font-size: 1rem;
    }

    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .cardHead{
      padding: 14px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      border-bottom: 1px solid var(--border);
      flex-wrap: wrap;
    }

    .cardHeadLeft{
      display: flex;
      flex-direction: column;
      gap: 2px;
      min-width: 0;
    }

    .cardHeadLeft .title{
      margin: 0;
      font-size: 1.05rem;
      font-weight: 800;
      color: var(--text);
    }

    .cardHeadLeft .subtitle{
      margin: 0;
      font-size: 0.95rem;
      color: var(--muted);
    }

    /* Score row + small reset */
    .scoreRow{
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #fff;
      box-shadow: 0 2px 10px rgba(0,0,0,0.04);
    }

    #score{
      font-weight: 800;
      font-size: 0.98rem;
      color: #333;
      white-space: nowrap;
    }

    .miniBtn{
      border: 1px solid var(--border);
      background: #fff;
      color: #444;
      font-weight: 700;
      font-size: 0.85rem;
      padding: 6px 10px;
      border-radius: 999px;
      cursor: pointer;
    }
    .miniBtn:hover{
      border-color: #d1d5db;
      background: #fafafa;
    }

    .content{
      padding: 16px;
    }

    .word{
      font-size: 2.2rem;
      text-align: center;
      font-weight: 900;
      margin: 10px 0 14px;
      letter-spacing: 0.2px;
    }

    .options{
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-top: 6px;
    }

    .options button{
      flex: 1;
      padding: 1.1rem;
      font-size: 1.5rem;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      color: #fff;
      font-weight: 900;
      box-shadow: 0 10px 18px rgba(0,0,0,0.08);
      transition: transform .05s ease, filter .2s ease;
    }
    .options button:active{ transform: translateY(1px); }
    .options button:hover{ filter: brightness(0.98); }

    /* Match your colors: der/die/das */
    .options button:nth-child(1){ background: var(--der); }
    .options button:nth-child(2){ background: var(--die); }
    .options button:nth-child(3){ background: var(--das); color: #111; }

    .result{
      margin-top: 14px;
      font-weight: 900;
      text-align: center;
      font-size: 1.25rem;
      min-height: 1.6em;
    }

    .extra{
      margin-top: 10px;
      padding: 12px;
      border-radius: 12px;
      border: 1px dashed #d1d5db;
      background: #fbfbfb;
      text-align: center;
      color: #374151;
      font-size: 1.05rem;
      min-height: 1.2em;
    }

    #nextBtn{
      display: none;
      margin-top: 12px;
      width: 100%;
      padding: 0.95rem;
      font-size: 1.15rem;
      background: var(--green);
      color: #fff;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 900;
      box-shadow: 0 10px 18px rgba(0,0,0,0.08);
    }
    #nextBtn:hover{ filter: brightness(0.97); }

    footer{
      margin-top: 18px;
      text-align: center;
      color: #888;
      font-size: 0.85rem;
    }

    /* Splash */
    #splash{
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    #splash h1{
      font-size: 2rem;
      margin: 0 0 1rem;
    }
    #splash img{
      width: 260px;
      height: 260px;
    }

    @media (min-width: 700px){
      .wrap{ padding: 22px 18px 34px; }
      .hero{ padding: 20px; }
      .word{ font-size: 2.4rem; }
    }
  </style>
</head>

<body>
  <!-- Splash -->
  <div id="splash">
    <h1>Welcher Artikel?</h1>
    <img src="icon.png" alt="Logo">
  </div>

  <!-- Top bar -->
  <header>
    <div class="topbar">
      <div class="brand">
        <img src="icon.png" alt="Logo">
        <div class="titles">
          <h1>Quiz</h1>
          <p>Welcher Artikel?</p>
        </div>
      </div>

      <a class="navlink" href="artikelregeln.html">Artikelregeln</a>
    </div>
  </header>

  <div class="wrap">
    <section class="hero">
      <h2 class="heroTitle">W√§hle den richtigen Artikel</h2>
      <p class="heroSub">Tippe auf <strong>der</strong>, <strong>die</strong> oder <strong>das</strong>. Danach siehst du Plural, Beispiel und Italienisch.</p>
    </section>

    <section class="card">
      <div class="cardHead">
        <div class="cardHeadLeft">
          <p class="title">Spiel</p>
          <p class="subtitle">Trainiere der / die / das</p>
        </div>

        <div class="scoreRow" aria-label="Punktestand">
          <div id="score">‚úÖ Richtig: 0‚ÄÉ‚ùå Falsch: 0</div>
          <button id="resetBtn" class="miniBtn" type="button" title="Reset game">Reset</button>
        </div>
      </div>

      <div class="content">
        <div class="word" id="word">Lade W√∂rter...</div>

        <div class="options" id="options"></div>

        <div class="result" id="result"></div>

        <div class="extra" id="extra"></div>

        <button id="nextBtn">‚û°Ô∏è N√§chstes Wort</button>
      </div>
    </section>

    <footer>
      by Marco P // Ver. 1.4 // 2026
    </footer>
  </div>

  <script>
    const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTLMG3zUFzaLSA82QS7T4E8IAHiung0H2LYRU8hoi_svBol2OoFWmTFBhGVhCPxK2xGtADv1sM9guDr/pub?output=csv";

    let data = [];
    let current = 0;
    let correct = 0;
    let wrong = 0;

    async function loadCSV() {
      const res = await fetch(csvUrl + '&t=' + new Date().getTime());
      const text = await res.text();

      const lines = text.trim().split("\n").slice(1);

      data = lines.map(line => {
        const [article, word, plural, example, italian] = line.split(",");
        return {
          article: article?.trim(),
          word: word?.trim(),
          plural: plural?.trim(),
          example: example?.trim(),
          italian: italian?.trim()
        };
      });

      shuffle(data);
      current = 0;
      updateScore();
      loadQuestion();
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function updateScore() {
      const total = correct + wrong;
      const percentage = total > 0 ? Math.round((correct / total) * 100) : 0;
      document.getElementById("score").textContent =
        `‚úÖ Richtig: ${correct}‚ÄÉ‚ùå Falsch: ${wrong}‚ÄÉüìä ${percentage}% korrekt`;
    }

    function loadQuestion() {
      if (!data.length) return;

      const item = data[current];
      document.getElementById("word").textContent = `${item.word}`;

      const options = ["der", "die", "das"];
      const optionsDiv = document.getElementById("options");
      const resultDiv = document.getElementById("result");
      const extraDiv = document.getElementById("extra");
      const nextBtn = document.getElementById("nextBtn");

      optionsDiv.innerHTML = "";
      resultDiv.textContent = "";
      extraDiv.innerHTML = "";
      nextBtn.style.display = "none";

      options.forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt;

        btn.onclick = () => {
          if (opt === item.article) {
            correct++;
            resultDiv.textContent = "‚úÖ Richtig!";
          } else {
            wrong++;
            resultDiv.textContent = `‚ùå Falsch! Richtiger Artikel: "${item.article}"`;
          }

          extraDiv.innerHTML =
            `<strong>Plural:</strong> ${item.plural}<br>` +
            `<strong>Beispiel:</strong> ${item.example}<br>` +
            `<strong>Italienisch:</strong> ${item.italian}`;

          updateScore();
          nextBtn.style.display = "block";
        };

        optionsDiv.appendChild(btn);
      });
    }

    document.getElementById("nextBtn").onclick = () => {
      current = (current + 1) % data.length;
      loadQuestion();
    };

    document.getElementById("resetBtn").onclick = () => {
      correct = 0;
      wrong = 0;
      current = 0;
      shuffle(data);

      document.getElementById("result").textContent = "";
      document.getElementById("extra").innerHTML = "";
      document.getElementById("nextBtn").style.display = "none";

      updateScore();
      loadQuestion();
    };

    // Start
    updateScore();
    loadCSV();

    // Splash hide
    setTimeout(() => {
      const splash = document.getElementById("splash");
      if (splash) splash.style.display = "none";
    }, 1200);
  </script>
</body>
</html>
